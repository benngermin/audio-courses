<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üé§ Speechify-Type Read-Along Demo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .highlight-active {
            background: linear-gradient(90deg, #dbeafe 0%, #bfdbfe 100%);
            border-left: 4px solid #3b82f6;
            font-weight: 500;
            color: #1e40af;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            transition: all 0.2s ease;
        }
        
        .highlight-word {
            background: linear-gradient(90deg, #fef3c7 0%, #fde68a 100%);
            color: #92400e;
            font-weight: 600;
            border-bottom: 2px solid #f59e0b;
            animation: word-pulse 2s ease-in-out infinite;
        }
        
        @keyframes word-pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }
        
        .text-segment {
            cursor: pointer;
            transition: all 0.2s ease;
            border-radius: 4px;
            padding: 4px 8px;
            margin: 2px 0;
            display: inline-block;
        }
        
        .text-segment:hover {
            background-color: #e0f2fe;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        
        .visualizer {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .visualizer.playing {
            animation: visualizer-pulse 2s ease-in-out infinite;
        }
        
        @keyframes visualizer-pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .controls-panel {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            border: 1px solid #cbd5e1;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-gray-800 mb-2">
                üé§ Speechify-Type Read-Along Demo
            </h1>
            <p class="text-gray-600">Experience synchronized text highlighting with audio playback</p>
        </div>

        <!-- Demo Container -->
        <div class="max-w-6xl mx-auto">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Audio Player Section -->
                <div class="bg-white rounded-lg shadow-lg p-6">
                    <h2 class="text-2xl font-semibold mb-4 flex items-center">
                        <span class="mr-2">üéµ</span>
                        Audio Player
                    </h2>
                    
                    <!-- Visualizer -->
                    <div class="flex justify-center mb-6">
                        <div id="visualizer" class="visualizer">
                            <div class="text-white text-lg font-semibold">
                                <span id="playIcon">‚ñ∂Ô∏è</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Controls -->
                    <div class="controls-panel rounded-lg p-4 mb-4">
                        <div class="flex items-center justify-center space-x-4 mb-4">
                            <button id="skipBack" class="p-2 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition-colors">
                                ‚è™
                            </button>
                            <button id="playPause" class="p-3 bg-blue-600 text-white rounded-full hover:bg-blue-700 transition-colors text-xl">
                                ‚ñ∂Ô∏è
                            </button>
                            <button id="skipForward" class="p-2 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition-colors">
                                ‚è©
                            </button>
                        </div>
                        
                        <!-- Progress Bar -->
                        <div class="mb-4">
                            <div class="flex items-center space-x-2">
                                <span id="currentTime" class="text-sm text-gray-600 font-mono">0:00</span>
                                <div class="flex-1 relative">
                                    <input 
                                        id="progressBar" 
                                        type="range" 
                                        min="0" 
                                        max="100" 
                                        value="0" 
                                        class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"
                                    >
                                </div>
                                <span id="totalTime" class="text-sm text-gray-600 font-mono">1:12</span>
                            </div>
                        </div>
                        
                        <!-- Speed Control -->
                        <div class="flex items-center justify-center space-x-2">
                            <span class="text-sm text-gray-600">Speed:</span>
                            <select id="speedControl" class="px-2 py-1 bg-white border border-gray-300 rounded text-sm">
                                <option value="0.5">0.5x</option>
                                <option value="0.75">0.75x</option>
                                <option value="1" selected>1x</option>
                                <option value="1.25">1.25x</option>
                                <option value="1.5">1.5x</option>
                                <option value="2">2x</option>
                            </select>
                        </div>
                    </div>

                    <!-- Read-Along Toggle -->
                    <div class="mb-4">
                        <div class="flex items-center justify-center space-x-2">
                            <label class="flex items-center space-x-2 cursor-pointer">
                                <input type="checkbox" id="readAlongToggle" class="form-checkbox text-blue-600" checked>
                                <span class="text-sm font-medium">üìñ Read-Along Mode</span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Text Display Section -->
                <div class="bg-white rounded-lg shadow-lg p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h2 class="text-2xl font-semibold flex items-center">
                            <span class="mr-2">üìñ</span>
                            Read-Along Text
                        </h2>
                        <!-- Settings -->
                        <div class="flex items-center space-x-4">
                            <select id="textSize" class="px-2 py-1 bg-gray-100 border border-gray-300 rounded text-sm">
                                <option value="text-sm">Small</option>
                                <option value="text-base" selected>Medium</option>
                                <option value="text-lg">Large</option>
                                <option value="text-xl">Extra Large</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Progress Indicator -->
                    <div class="mb-4">
                        <div class="flex items-center justify-between text-sm text-gray-600 mb-1">
                            <span>Reading Progress</span>
                            <span id="readingProgress">0 / 13</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-1">
                            <div id="progressIndicator" class="bg-blue-500 h-1 rounded-full transition-all duration-300" style="width: 0%"></div>
                        </div>
                    </div>
                    
                    <!-- Text Content -->
                    <div id="textContent" class="prose max-w-none text-base leading-7 h-96 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300">
                        <!-- Text segments will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Features List -->
        <div class="max-w-4xl mx-auto mt-12 bg-white rounded-lg shadow-lg p-8">
            <h3 class="text-2xl font-semibold mb-6 text-center">‚ú® Features Implemented</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="space-y-3">
                    <div class="flex items-center space-x-2">
                        <span class="text-green-500">‚úÖ</span>
                        <span>Real-time text highlighting</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <span class="text-green-500">‚úÖ</span>
                        <span>Click-to-seek functionality</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <span class="text-green-500">‚úÖ</span>
                        <span>Auto-scroll to active text</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <span class="text-green-500">‚úÖ</span>
                        <span>Multiple text sizes</span>
                    </div>
                </div>
                <div class="space-y-3">
                    <div class="flex items-center space-x-2">
                        <span class="text-green-500">‚úÖ</span>
                        <span>Variable playback speeds</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <span class="text-green-500">‚úÖ</span>
                        <span>Progress tracking</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <span class="text-green-500">‚úÖ</span>
                        <span>Sentence-level synchronization</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <span class="text-green-500">‚úÖ</span>
                        <span>Toggle read-along mode</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Demo data - matches the structure from our React components
        const demoText = {
            content: `Welcome to this comprehensive course on risk management and insurance principles. In today's rapidly evolving business landscape, understanding risk assessment has become more crucial than ever before.

Risk management is the systematic process of identifying, analyzing, and responding to risk factors throughout the life of a project or business operation. This process involves several key components that we'll explore in detail.

The first component is risk identification, which involves recognizing potential threats that could impact your organization. These threats can range from natural disasters and cyber attacks to market volatility and regulatory changes.

Once risks are identified, the next step is risk assessment. This involves evaluating the likelihood of each risk occurring and the potential impact it could have on your business operations. This assessment helps prioritize which risks require immediate attention.

Risk mitigation strategies then come into play, involving the development of plans to minimize, transfer, or eliminate identified risks. Common strategies include insurance coverage, diversification, and contingency planning.

Finally, continuous monitoring ensures that risk management strategies remain effective as business conditions change. Regular reviews and updates to risk management plans are essential for maintaining organizational resilience.`,
            segments: [
                { text: 'Welcome to this comprehensive course on risk management and insurance principles.', startTime: 0, endTime: 4.5 },
                { text: "In today's rapidly evolving business landscape, understanding risk assessment has become more crucial than ever before.", startTime: 4.5, endTime: 10.2 },
                { text: 'Risk management is the systematic process of identifying, analyzing, and responding to risk factors throughout the life of a project or business operation.', startTime: 11, endTime: 17.5 },
                { text: "This process involves several key components that we'll explore in detail.", startTime: 17.5, endTime: 21.8 },
                { text: 'The first component is risk identification, which involves recognizing potential threats that could impact your organization.', startTime: 22.5, endTime: 28.2 },
                { text: 'These threats can range from natural disasters and cyber attacks to market volatility and regulatory changes.', startTime: 28.2, endTime: 33.5 },
                { text: 'Once risks are identified, the next step is risk assessment.', startTime: 34.2, endTime: 37.8 },
                { text: 'This involves evaluating the likelihood of each risk occurring and the potential impact it could have on your business operations.', startTime: 37.8, endTime: 44.5 },
                { text: 'This assessment helps prioritize which risks require immediate attention.', startTime: 44.5, endTime: 48.2 },
                { text: 'Risk mitigation strategies then come into play, involving the development of plans to minimize, transfer, or eliminate identified risks.', startTime: 49, endTime: 55.5 },
                { text: 'Common strategies include insurance coverage, diversification, and contingency planning.', startTime: 55.5, endTime: 59.8 },
                { text: 'Finally, continuous monitoring ensures that risk management strategies remain effective as business conditions change.', startTime: 60.5, endTime: 66.2 },
                { text: 'Regular reviews and updates to risk management plans are essential for maintaining organizational resilience.', startTime: 66.2, endTime: 71.8 }
            ]
        };

        // Demo state
        let isPlaying = false;
        let currentTime = 0;
        let playbackRate = 1;
        let totalDuration = 72; // seconds
        let activeSegmentIndex = -1;
        let readAlongEnabled = true;
        let animationId;

        // DOM elements
        const playPauseBtn = document.getElementById('playPause');
        const visualizer = document.getElementById('visualizer');
        const playIcon = document.getElementById('playIcon');
        const progressBar = document.getElementById('progressBar');
        const currentTimeDisplay = document.getElementById('currentTime');
        const totalTimeDisplay = document.getElementById('totalTime');
        const speedControl = document.getElementById('speedControl');
        const skipBackBtn = document.getElementById('skipBack');
        const skipForwardBtn = document.getElementById('skipForward');
        const readAlongToggle = document.getElementById('readAlongToggle');
        const textContent = document.getElementById('textContent');
        const textSize = document.getElementById('textSize');
        const readingProgress = document.getElementById('readingProgress');
        const progressIndicator = document.getElementById('progressIndicator');

        // Initialize
        function init() {
            renderText();
            updateDisplay();
            setupEventListeners();
            totalTimeDisplay.textContent = formatTime(totalDuration);
        }

        function setupEventListeners() {
            playPauseBtn.addEventListener('click', togglePlayPause);
            skipBackBtn.addEventListener('click', () => seek(Math.max(0, currentTime - 15)));
            skipForwardBtn.addEventListener('click', () => seek(Math.min(totalDuration, currentTime + 30)));
            progressBar.addEventListener('input', (e) => seek((e.target.value / 100) * totalDuration));
            speedControl.addEventListener('change', (e) => {
                playbackRate = parseFloat(e.target.value);
            });
            readAlongToggle.addEventListener('change', (e) => {
                readAlongEnabled = e.target.checked;
                renderText();
            });
            textSize.addEventListener('change', (e) => {
                textContent.className = textContent.className.replace(/text-\w+/, e.target.value);
            });
        }

        function renderText() {
            if (!readAlongEnabled) {
                textContent.innerHTML = '<div class="text-gray-500 text-center p-8">Read-along mode disabled</div>';
                return;
            }

            const segments = demoText.segments.map((segment, index) => {
                return `<span 
                    class="text-segment" 
                    data-segment-index="${index}"
                    data-start-time="${segment.startTime}"
                    onclick="seekToSegment(${index})"
                    title="Jump to ${segment.startTime.toFixed(1)}s"
                >${segment.text}</span>`;
            }).join(' ');

            textContent.innerHTML = `<div class="space-y-4">${segments}</div>`;
        }

        function togglePlayPause() {
            isPlaying = !isPlaying;
            
            if (isPlaying) {
                playPauseBtn.textContent = '‚è∏Ô∏è';
                playIcon.textContent = '‚è∏Ô∏è';
                visualizer.classList.add('playing');
                startAnimation();
            } else {
                playPauseBtn.textContent = '‚ñ∂Ô∏è';
                playIcon.textContent = '‚ñ∂Ô∏è';
                visualizer.classList.remove('playing');
                stopAnimation();
            }
        }

        function startAnimation() {
            function animate() {
                if (!isPlaying) return;
                
                currentTime += (0.1 * playbackRate); // 100ms intervals
                if (currentTime >= totalDuration) {
                    currentTime = totalDuration;
                    togglePlayPause();
                    return;
                }
                
                updateDisplay();
                updateActiveSegment();
                
                animationId = setTimeout(animate, 100);
            }
            animate();
        }

        function stopAnimation() {
            if (animationId) {
                clearTimeout(animationId);
            }
        }

        function seek(time) {
            currentTime = Math.max(0, Math.min(totalDuration, time));
            updateDisplay();
            updateActiveSegment();
        }

        function seekToSegment(segmentIndex) {
            const segment = demoText.segments[segmentIndex];
            if (segment) {
                seek(segment.startTime);
            }
        }

        function updateDisplay() {
            const progressPercent = (currentTime / totalDuration) * 100;
            progressBar.value = progressPercent;
            currentTimeDisplay.textContent = formatTime(currentTime);
        }

        function updateActiveSegment() {
            if (!readAlongEnabled) return;

            // Find active segment
            let newActiveIndex = -1;
            for (let i = 0; i < demoText.segments.length; i++) {
                const segment = demoText.segments[i];
                if (currentTime >= segment.startTime && currentTime <= segment.endTime) {
                    newActiveIndex = i;
                    break;
                }
            }

            if (newActiveIndex !== activeSegmentIndex) {
                // Clear previous highlight
                if (activeSegmentIndex >= 0) {
                    const prevElement = document.querySelector(`[data-segment-index="${activeSegmentIndex}"]`);
                    if (prevElement) {
                        prevElement.classList.remove('highlight-active');
                    }
                }

                // Highlight new segment
                activeSegmentIndex = newActiveIndex;
                if (activeSegmentIndex >= 0) {
                    const activeElement = document.querySelector(`[data-segment-index="${activeSegmentIndex}"]`);
                    if (activeElement) {
                        activeElement.classList.add('highlight-active');
                        
                        // Auto-scroll to active segment
                        activeElement.scrollIntoView({
                            behavior: 'smooth',
                            block: 'center',
                            inline: 'nearest'
                        });
                    }
                }

                // Update progress
                const progress = activeSegmentIndex >= 0 ? activeSegmentIndex + 1 : 0;
                readingProgress.textContent = `${progress} / ${demoText.segments.length}`;
                progressIndicator.style.width = `${(progress / demoText.segments.length) * 100}%`;
            }
        }

        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const remainingSeconds = Math.floor(seconds % 60);
            return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;
        }

        // Start the demo
        init();
    </script>
</body>
</html>